<!-- <!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.10.2/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.10.2/addons/p5.sound.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./styles/styles.css" />
    <meta charset="utf-8" />
  </head>
  <body>
    <script src="./sketch.js"></script>
    <script src="./scripts/objects/bird.js"></script>
    <script src="./scripts/objects/pipe.js"></script>
  </body>
</html> -->

<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, user-scalable=yes"
/>
<canvas id="c"></canvas>
<script id="vs" type="notjs">
  attribute float vertexId;

  varying vec4 v_color;

  uniform float numIds;
  uniform float time;
  uniform vec2 resolution;

  #define PI radians(180.0)

  vec3 hsv2rgb(vec3 c) {
    c = vec3(c.x, clamp(c.yz, 0.0, 1.0));
    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
  }


  void main() {
    vec4 offsets = vec4(
      sin(time),
      sin(time * .13) * PI * 2.,
      sin(time * .43) * .5 + 1.,
      cos(time * .17) * .5 + .5);

    vec4 centers = vec4(
      sin(time * .163) * .5,
      cos(time * .267) * .5,
      sin(time * .367) * .5,
      cos(time * .497) * .5);

    vec4 mult = vec4(
      1.,
      (sin(time * .1) * .5 + .5) * 3.,
      0.,
      0.);

    vec2 position = vec2(vertexId / numIds, mod(vertexId, 2.));
    vec2 offset = mix(offsets.xz, offsets.yw, position.y);
    float a = mult.x * position.x * PI * 2.0 + offset.x;//mix(u_offsets.x, u_offsets.y, a_position.y);
    float c = cos(a * mult.y);
    vec2 xy = vec2(
      cos(a),
      sin(a)) * c * offset.y +
      mix(centers.xy, centers.zw, position.y);
    vec2 aspect = vec2(resolution.y / resolution.x, 1);
    gl_Position = vec4(xy * aspect, 0, 1);

    float hue = position.x;
    float sat = 1.;
    float val = 1.;
    v_color = vec4(hsv2rgb(vec3(hue, sat, val)), 1);
  }
</script>
<script id="fs" type="notjs">
  precision mediump float;
  varying vec4 v_color;
  void main() {
    gl_FragColor = v_color;
  }
</script>
<script src="https://twgljs.org/dist/twgl-full.min.js"></script>
